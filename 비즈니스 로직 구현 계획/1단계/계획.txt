===== 1단계: 기본 기능 + 서버간 통신 =====

목표: 챌린지 완료 → 외부 쇼핑몰에 상품 주문이 되는 기본 흐름 완성

======================================================================
                         전체 흐름
======================================================================

  [개발자] → 챌린지 완료 버튼 클릭
       |
  [서버1: DevQuest]
       | 1. 챌린지 완료 처리
       | 2. 챌린지에 걸린 보상 상품ID 확인
       | 3. 서버2에 주문 요청 (POST /api/orders)
       | 4. 주문 결과 저장
       v
  [서버2: 쇼핑몰]
       | 5. 주문 접수
       | 6. 재고 차감
       | 7. 배송 상태 → PREPARING
       v
  [프론트] → 챌린지 완료 + 주문/배송 상태 확인

======================================================================
  1-1. 쇼핑몰 서버 (NestJS) - 상품 + 주문 + 배송
======================================================================

  프로젝트명 변경: payment-api → shop-api

  [상품 (Product)]
  테이블: id, name, description, price, stock, image_url, created_at, updated_at
  API:
    GET    /api/products          상품 목록
    GET    /api/products/:id      상품 상세
    POST   /api/products          상품 등록 (시드 데이터용)

  [주문 (Order)]
  테이블: id, product_id, user_id, quantity, status, created_at, updated_at
  상태: PENDING → PAID → PREPARING → SHIPPED → DELIVERED / CANCELLED
  API:
    POST   /api/orders            주문 접수 (재고 차감 포함)
    GET    /api/orders/:id        주문 상세
    GET    /api/orders/user/:userId  사용자별 주문 목록
    PATCH  /api/orders/:id/status    배송 상태 변경

  [시드 데이터]
  상품 예시:
    - 스타벅스 아메리카노 (4,500원)
    - 배달의민족 1만원권 (10,000원)
    - 키보드 키캡세트 (25,000원)
    - 모니터 거치대 (35,000원)
    - 유데미 강의 쿠폰 (15,000원)

======================================================================
  1-2. DevQuest 서버 (Spring Boot) - 챌린지 + 완료 처리
======================================================================

  [챌린지 (Challenge)]
  테이블: id, title, description, reward_product_id, status, created_at, updated_at
  상태: ACTIVE / COMPLETED / EXPIRED
  reward_product_id: 쇼핑몰 서버의 상품 ID 참조
  API:
    POST   /api/challenges                 챌린지 등록
    GET    /api/challenges                 챌린지 목록
    GET    /api/challenges/:id             챌린지 상세
    POST   /api/challenges/:id/complete    챌린지 완료 (→ 쇼핑몰 주문 요청)

  [챌린지 완료 이력 (ChallengeCompletion)]
  테이블: id, challenge_id, member_id, order_id, status, created_at
  상태: SUCCESS / FAILED (주문 실패 시)

  [쇼핑몰 API 호출 클라이언트]
  - WebClient 빈 설정 (base-url: http://localhost:3000/api)
  - ShopClient 서비스
    - getProducts(): 상품 목록 조회
    - getProduct(id): 상품 상세 조회
    - createOrder(productId, userId): 주문 요청

  [챌린지 완료 처리 흐름]
  1. 챌린지 존재 여부 확인
  2. 이미 완료한 챌린지인지 확인
  3. 챌린지에 걸린 reward_product_id로 쇼핑몰에 주문 요청
  4. 주문 성공 → ChallengeCompletion(SUCCESS) 저장
  5. 주문 실패 → ChallengeCompletion(FAILED) 저장, 에러 반환

======================================================================
  1-3. 프론트엔드 - 기본 화면 연동
======================================================================

  [Dashboard]
  - 활성 챌린지 수
  - 최근 완료한 챌린지
  - 최근 주문 상태

  [Challenges 페이지]
  - 챌린지 카드 목록 (제목, 설명, 보상 상품 표시)
  - 완료 버튼 → POST /api/challenges/:id/complete
  - 성공/실패 토스트 알림

  [Shop 페이지]
  - 쇼핑몰 상품 목록 (서버2에서 가져옴)
  - 상품 카드 (이름, 가격, 재고)
  - 조회 전용 (직접 구매는 챌린지 완료를 통해서만)

  [주문 내역 페이지 (추가)]
  - 내 주문 목록
  - 주문 상태 뱃지 (PENDING → SHIPPED 등)

======================================================================
  1-4. 구현 순서
======================================================================

  순서   작업                              서버
  ─────────────────────────────────────────────────
  1      프로젝트명 변경 (payment-api → shop-api)   NestJS
  2      Product 스키마 + API + 시드 데이터          NestJS
  3      Order 스키마 + API                         NestJS
  4      Challenge 엔티티 + Flyway + API            Spring Boot
  5      ChallengeCompletion 엔티티 + Flyway        Spring Boot
  6      ShopClient (WebClient)                     Spring Boot
  7      챌린지 완료 → 주문 연동 로직               Spring Boot
  8      프론트 Challenges 페이지 연동               React
  9      프론트 Shop 페이지 연동                     React
  10     프론트 주문 내역 페이지                     React
  11     프론트 Dashboard 연동                       React
  12     전체 흐름 수동 테스트                       전체

======================================================================
  1단계 완료 기준
======================================================================

  - 챌린지 목록에서 완료 버튼 누르면 쇼핑몰에 주문이 들어감
  - 쇼핑몰에서 재고 차감 + 배송 상태 변경 가능
  - 프론트에서 전체 흐름 확인 가능
  - 아직 동시성 제어 없음 (의도적으로 문제가 발생할 수 있는 상태)
