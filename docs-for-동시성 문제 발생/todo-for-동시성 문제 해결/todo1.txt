================================================================================
  동시성 문제 해결 TODO
================================================================================

  ✓ 완료:
    1. 중복 승인 → SELECT FOR UPDATE
    2. 재고 경합 → 원자적 UPDATE

  남은 작업:

  [ ] 3. 주문 실패 시 빈 승인 해결
       - catch 블록에서 APPROVED 대신 APPROVE_FAILED 상태 도입
       - 또는 주문 실패 시 승인 자체를 롤백
       - 관리자가 실패 건을 확인하고 재시도할 수 있는 흐름

  [ ] 4. 멱등키 도입 (네트워크 응답 유실 대응)
       - shop-api 주문 요청에 participationId를 멱등키로 포함
       - shop-api에서 같은 키 재요청 시 기존 주문 반환
       - shop_order 테이블에 participation_id unique 제약조건 추가

  [ ] 5. Saga 패턴 (유령 주문 방지)
       - 주문 성공 후 로컬 커밋 실패 시 shop-api 주문 취소 호출
       - shop-api에 주문 취소 API 필요 (재고 복구 포함)
       - 또는 Outbox 패턴으로 이벤트 기반 비동기 처리

  [ ] 6. 동시성 테스트 UI
       - /concurrency-test 페이지 구현
       - N건 동시 승인/주문 발사 기능
       - 결과 시각화 (성공/실패, 소요시간)
       - 양쪽 DB 정합성 검증 표시

================================================================================

  추천 순서: 3 → 4 → 6 → 5
  (3, 4는 코드 수정 수준, 6은 문제 재현 도구, 5는 패턴 도입)

================================================================================
