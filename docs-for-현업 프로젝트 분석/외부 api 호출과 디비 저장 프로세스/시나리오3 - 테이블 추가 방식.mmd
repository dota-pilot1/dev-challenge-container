flowchart TD
    시작([사용자 요청]) --> 트랜잭션시작[트랜잭션 시작]
    트랜잭션시작 --> 본데이터저장[본 데이터 저장]
    본데이터저장 --> 아웃박스저장[Outbox 이벤트 저장]
    아웃박스저장 --> 커밋[커밋]

    커밋 --> 워커실행[Outbox 워커 조회]
    워커실행 --> 외부호출[외부 API 호출]
    외부호출 --> 성공여부{응답 성공 여부}
    성공여부 -->|성공| 이벤트완료[이벤트 상태 DONE]
    성공여부 -->|실패| 재시도증가[재시도 횟수 증가]
    재시도증가 --> 워커실행

