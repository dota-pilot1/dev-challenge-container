# 02. 브랜드 저장 트랜잭션 동작 분석

## 핵심 메서드
- AirstarBrandService.savePartenrBrands(...)
- 위치: src/main/java/com/cj/freshway/fs/cps/airstar/brand/AirstarBrandService.java
- 어노테이션: @Transactional

## 현재 동작
1. 요청 리스트 순회
2. status == C면 DB INSERT + 등록 리스트(regList) 적재
3. status == U면 DB UPDATE + 수정 리스트(upList) 적재
4. regList 존재 시 CP204 호출
5. upList 존재 시 CP206 호출

## 주의 포인트
- DB 작업과 외부 API 호출이 같은 트랜잭션 경계 안에 존재
- 외부 호출은 네트워크 I/O라 지연/타임아웃 가능
- 외부 응답 코드 기반 명시적 예외 처리/보상 처리 로직이 제한적

## 연습 시 관찰할 것
- 외부 호출 실패 시 DB 롤백 여부
- 외부는 성공했는데 내부는 롤백되는 케이스 발생 여부
- 동일 요청 재시도 시 중복 반영 여부(idempotency)
